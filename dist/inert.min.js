!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){var r=window.Element.prototype,n=r.matches||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;if(!e||1!==e.nodeType)return!1;var o=e.parentNode;if(n)return n.call(e,t);for(var i=o.querySelectorAll(t),a=i.length,s=0;s<a;s++)if(i[s]===e)return!0;return!1}var t=e,r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e){function o(t){if(!t.querySelector("style#inert-style")){var r=e.createElement("style");r.setAttribute("id","inert-style"),r.textContent="\n    [inert], [inert] * {\n      pointer-events: none;\n      cursor: default;\n      user-select: none;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n    }",t.appendChild(r)}}var i="attachShadow"in Element.prototype,a=["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"].join(","),s=function(){function o(n,s){if(r(this,o),this._rootElement=n,this._rootTabindex=n.getAttribute("tabindex")||null,n.setAttribute("aria-hidden","true"),n.tabIndex=-1,n.blur(),n.firstElementChild){var l=e.activeElement;for(l===e.body&&(l=null);l;){if(n.contains(l)){l.blur();break}l=l.shadowRoot?l.shadowRoot.activeElement:null}}if(i){if(!t(n,a)){if(!(-1!==n.tagName.indexOf("-")))return}if(!n.__failedAttachShadow){if(n.shadowRoot)for(var u=n.shadowRoot.querySelectorAll("[inert]"),h=0,d=u.length;h<d;h++)u[h].inert=!0;else try{n.attachShadow({mode:"open"}).appendChild(e.createElement("slot")),n.attachShadow=function(){var e=this.shadowRoot.querySelector("slot");return e&&this.shadowRoot.removeChild(e),delete this.attachShadow,this.shadowRoot}}catch(e){return n.__failedAttachShadow=!0,void console.warn("Could not inert element shadowRoot",n,e)}"function"==typeof s&&(this._observer=new MutationObserver(s),this._observer.observe(n.shadowRoot,{attributes:!0,subtree:!0,childList:!0}))}}}return n(o,[{key:"destructor",value:function(){this._observer&&this._observer.disconnect(),this._rootElement.removeAttribute("aria-hidden"),this._rootTabindex?this._rootElement.setAttribute("tabindex",this._rootTabindex):this._rootElement.removeAttribute("tabindex"),this._observer=null,this._rootElement=null,this._rootTabindex=null}}]),o}(),l=function(){function e(t){var n=this;if(r(this,e),!t)throw new Error("Missing required argument; InertManager needs to wrap a document.");if(this._document=t,this._inertRoots=new Map,this.watchForInert=this._watchForInert.bind(this),this._observer=new MutationObserver(this.watchForInert),o(t.head||t.body||t.documentElement),"loading"===t.readyState){var i=function e(){t.removeEventListener("readystatechange",e),n._onDocumentLoaded()};t.addEventListener("readystatechange",i)}else this._onDocumentLoaded()}return n(e,[{key:"setInert",value:function(e,t){if(this._inertRoots.has(e)!==t)if(t){var r=new s(e,this.watchForInert);if(e.setAttribute("inert",""),this._inertRoots.set(e,r),!this._document.body.contains(e))for(var n=e.parentNode;n;){if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){o(n);break}n=n.parentNode}}else{var i=this._inertRoots.get(e);i.destructor(),this._inertRoots.delete(e),e.removeAttribute("inert")}}},{key:"_onDocumentLoaded",value:function(){var e=Array.from(this._document.querySelectorAll("[inert]")),t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.setInert(a,!0)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}this._observer.observe(this._document.body,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(e,r){var n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;switch(l.type){case"childList":var u=!0,h=!1,d=void 0;try{for(var c,f=Array.from(l.addedNodes)[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var v=c.value;if(v.nodeType===Node.ELEMENT_NODE){var y=Array.from(v.querySelectorAll("[inert]"));t(v,"[inert]")&&y.unshift(v);var b=!0,m=!1,w=void 0;try{for(var p,_=y[Symbol.iterator]();!(b=(p=_.next()).done);b=!0){var E=p.value;this.setInert(E,!0)}}catch(e){m=!0,w=e}finally{try{!b&&_.return&&_.return()}finally{if(m)throw w}}}}}catch(e){h=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(h)throw d}}break;case"attributes":if("inert"!==l.attributeName)continue;var S=l.target,A=S.hasAttribute("inert");this.setInert(S,A)}}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}}}]),e}(),u=new l(e);Object.defineProperty(Element.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(e){u.setInert(this,e)}});var h=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){for(var e=this;e&&!e.inert;){for(;e.assignedSlot;)e=e.assignedSlot;e=e.parentNode||e.host}if(!e||!e.inert)return h.call(this)}}(document)});
